#! /bin/sh
# -i br+ is a wild card for any interface that starts with 
# br. Docker network seems to create network interfacecs on the fly with those.

iptables -D INPUT -i br+ -p tcp --dport 6901 -j ACCEPT
iptables -D OUTPUT -o br+ -p tcp --sport 6901 -j ACCEPT
iptables -D FORWARD -i br+ -p tcp --dport 6901 -j ACCEPT

iptables -D INPUT -i br+ -j DROP
iptables -D OUTPUT -o br+ -j DROP
iptables -D FORWARD -i br+ -j DROP

# iptables -D INPUT -p tcp --dport 6901 -m state --state NEW,ESTABLISHED -j ACCEPT
# iptables -D OUTPUT -p tcp --sport 6901 -m state --state ESTABLISHED -j ACCEPT

iptables -D INPUT -i br+ -m state --state RELATED,ESTABLISHED -j ACCEPT
#iptables -D OUTPUT -o br+ -m state --state RELATED,ESTABLISHED -j ACCEPT
iptables -D INPUT -i br+ -p tcp --sport 5900 -m state --state NEW -j ACCEPT
